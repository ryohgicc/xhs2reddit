# 更新日志

所有重要的项目变更都会记录在此文件中。

## [1.0.70] - 2025-09-16

### 技术改进
- 🔧 **Prompt配置化** - 将AI润色的prompt模板提取到独立的`prompts.json`配置文件
- ⚙️ **配置文件管理** - 新增配置加载机制，支持动态读取和备用默认配置
- 🛠️ **代码重构** - 重构`buildPolishPrompt`方法，改为异步加载配置文件
- 📝 **可维护性提升** - 用户可直接修改`prompts.json`文件来自定义AI润色的prompt内容
- 🌐 **扩展兼容** - 更新Chrome和Firefox版本的manifest文件，添加配置文件访问权限

### 文件变更
- 新增 `prompts.json` - AI润色prompt配置文件
- 更新 `content.js` - 添加配置加载方法和异步prompt构建
- 更新 `manifest.json` 和 `manifest-firefox.json` - 添加prompts.json到web_accessible_resources

## [1.0.69] - 2025-09-16

### 新增功能
- 🤖 **AI润色功能** - 集成OpenAI API，支持将小红书笔记内容润色为适合Reddit发布的英文内容
- ⚙️ **AI设置界面** - 新增设置面板，支持配置OpenAI API Key、Base URL和模型选择
- 🎯 **智能按钮布局** - 重新设计插件界面，将AI润色按钮移至顶部，新增填充AI内容按钮
- 💾 **结果缓存机制** - AI润色结果会持久化显示，直到生成新结果
- 🔄 **一键填充功能** - 支持将AI润色的英文内容一键填充到Reddit表单

### 界面优化
- ✨ 插件面板支持页面滚动，提升用户体验
- 🎨 优化AI按钮样式，采用渐变背景和悬停效果
- 📱 调整面板最大高度为85vh，提供更多显示空间
- 🗂️ 移除AI润色结果中的复制按钮，界面更加简洁

### 技术改进
- 🛠️ 重构插件面板结构，提升代码可维护性
- 🔧 优化AI润色结果显示逻辑，支持内容更新而非重建
- 📝 完善错误处理和用户反馈机制
- 🎯 改进Reddit表单识别和填充逻辑

## [1.0.50] - 2025-01-XX

### 新增功能
- 🚀 **Reddit集成功能** - 支持在Reddit页面直接粘贴小红书图片
- 📝 **智能表单填充** - 自动填充Reddit发帖表单的标题和内容
- 🖼️ **图片格式转换** - 统一转换图片为PNG格式，确保最佳兼容性
- 🔧 **Background Script** - 新增后台脚本处理跨域图片下载

### 技术改进
- ✨ 实现Clipboard API图片剪贴板功能
- 🛠️ 通过Canvas API实现图片格式转换（WebP/JPEG → PNG）
- 🌐 解决小红书CDN的CORS跨域限制
- 📱 优化Reddit页面的表单元素识别和填充逻辑

### 文件变更
- 新增 `background.js` - 处理跨域请求和图片下载
- 更新 `content.js` - 添加Reddit页面支持和图片处理功能
- 更新 `manifest.json` 和 `manifest-firefox.json` - 添加必要权限和background script配置

### 修复问题
- 🐛 修复WebP格式图片在剪贴板中不被支持的问题
- 🐛 修复JPEG格式图片剪贴板兼容性问题
- 🐛 修复Reddit页面标题输入框识别失败的问题
- 🐛 解决图片下载时的CORS错误

## [1.0.23] - 2025-01-XX

### 修复问题
- 🐛 修复剪贴板格式兼容性问题，统一使用PNG格式
- 🔧 改进图片转换逻辑，增强错误处理

## [1.0.22] - 2025-01-XX

### 修复问题
- 🐛 修复WebP图片格式转换和Reddit表单填充问题
- 📝 扩展Reddit标题输入框的选择器列表
- 🎯 优化表单元素填充逻辑，支持多种表单元素类型

## [1.0.21] - 2025-01-XX

### 修复问题
- 🐛 修复CORS问题，添加background script处理图片下载
- 🌐 更新manifest文件，添加小红书CDN的host_permissions

## [1.0.20] - 2025-01-XX

### 新增功能
- 🚀 添加Reddit页面图片直接粘贴功能
- 📋 实现图片自动下载和剪贴板设置
- ⚡ 支持即时粘贴和状态提示

## [1.0.19] - 2025-01-XX

### 新增功能
- 📝 添加Reddit页面表单自动填充功能
- 🎯 支持标题和内容的智能填充
- 🔄 优化表单元素识别逻辑

## [1.0.10] - 2025-01-XX

### 基础功能
- ✅ 支持所有小红书页面展示悬浮窗
- ✅ 优化图片提取逻辑，只提取笔记详情页大图
- ✅ 完善内容提取功能
- ✅ Chrome/Firefox兼容性支持
- 📋 实现内容提取和数据导出功能
- 🎨 可拖拽的悬浮窗口设计

---

## 版本号说明

版本号格式：`主版本号.次版本号.修订号`

- **主版本号**：重大功能更新或架构变更
- **次版本号**：新功能添加
- **修订号**：问题修复和小幅改进

## 贡献指南

如果您发现问题或有改进建议，欢迎：
- 提交 Issue 报告问题
- 提交 Pull Request 贡献代码
- 在 GitHub 上给项目点星支持